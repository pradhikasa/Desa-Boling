<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Buku Harian Pribadi</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- FontAwesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
        /* Scrollbar styling */
        .diary-scroll::-webkit-scrollbar {
            width: 6px;
        }
        .diary-scroll::-webkit-scrollbar-thumb {
            background-color: #cbd5e1;
            border-radius: 4px;
        }
        .hidden-el { display: none !important; }
    </style>
</head>
<body class="bg-gray-100 min-h-screen flex items-center justify-center font-sans p-4">

    <!-- CONTAINER UTAMA -->
    <div class="w-full max-w-md bg-white rounded-lg shadow-xl overflow-hidden relative flex flex-col" style="height: 85vh;">
        
        <!-- BAGIAN 1: LOGIN -->
        <div id="auth-screen" class="flex-1 flex flex-col p-8 justify-center">
            
            <div class="text-center mb-8">
                <div class="bg-blue-100 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4 text-blue-600">
                    <i class="fas fa-lock text-2xl"></i>
                </div>
                <h2 class="text-3xl font-bold text-gray-800">Masuk Aplikasi</h2>
                <p class="text-gray-500 mt-2">Silakan masukkan kredensial anda</p>
            </div>

            <form id="mainLoginForm" onsubmit="handleMainLogin(event)">
                <div class="mb-4">
                    <label class="block text-gray-700 text-sm font-bold mb-2" for="mainUser">Username</label>
                    <div class="relative">
                        <span class="absolute inset-y-0 left-0 flex items-center pl-3 text-gray-400">
                            <i class="fas fa-user"></i>
                        </span>
                        <input class="shadow appearance-none border rounded w-full py-2 pl-10 pr-3 text-gray-700 leading-tight focus:outline-none focus:ring-2 focus:ring-blue-500" id="mainUser" type="text" placeholder="Username" required>
                    </div>
                </div>
                <div class="mb-6">
                    <label class="block text-gray-700 text-sm font-bold mb-2" for="mainPass">Password</label>
                    <div class="relative">
                        <span class="absolute inset-y-0 left-0 flex items-center pl-3 text-gray-400">
                            <i class="fas fa-lock"></i>
                        </span>
                        <input class="shadow appearance-none border rounded w-full py-2 pl-10 pr-3 text-gray-700 mb-3 leading-tight focus:outline-none focus:ring-2 focus:ring-blue-500" id="mainPass" type="password" placeholder="Masukkan Password" required>
                    </div>
                    <p id="loginError" class="text-red-500 text-xs italic hidden-el text-center bg-red-50 p-2 rounded border border-red-100">
                        <i class="fas fa-exclamation-circle"></i> Username atau Password salah!
                    </p>
                </div>
                <div class="flex items-center justify-between">
                    <button class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded w-full focus:outline-none focus:shadow-outline transition duration-300" type="submit">
                        Masuk
                    </button>
                </div>
            </form>
        </div>

        <!-- BAGIAN 2: DASHBOARD APLIKASI -->
        <div id="app-screen" class="hidden-el flex-1 flex flex-col h-full">
            
            <div class="bg-blue-600 p-4 text-white flex justify-between items-center shadow-md z-10">
                <div>
                    <h1 class="text-lg font-bold">Buku Harian Pribadi</h1>
                    <p class="text-xs text-blue-100">Aman & Tersimpan</p>
                </div>
                <button onclick="logout()" class="bg-red-500 hover:bg-red-600 text-white text-xs py-1 px-2 rounded border border-red-400 transition shadow-sm">
                    <i class="fas fa-sign-out-alt"></i> Keluar
                </button>
            </div>

            <div class="flex-1 p-4 overflow-y-auto bg-gray-50 diary-scroll">
                
                <!-- Form Tulis Catatan -->
                <div class="bg-white p-4 rounded-lg shadow-sm border border-gray-200 mb-6">
                    <h3 class="text-gray-800 font-bold mb-3 text-sm uppercase tracking-wide flex items-center">
                        <i class="fas fa-pen mr-2 text-blue-500"></i> Tulis Cerita Baru
                    </h3>
                    <form id="diaryForm" onsubmit="saveEntry(event)">
                        <div class="mb-3">
                            <input type="text" id="entryTitle" class="w-full p-2 border rounded text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm font-medium" placeholder="Judul..." required>
                        </div>
                        <div class="mb-3">
                            <textarea id="entryContent" class="w-full p-2 border rounded text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500 h-24 text-sm" placeholder="Ceritakan harimu..." required></textarea>
                        </div>
                        <button type="submit" class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 w-full font-bold text-sm transition shadow">
                            <i class="fas fa-save"></i> Simpan
                        </button>
                    </form>
                </div>

                <div id="diaryList" class="space-y-3 pb-10"></div>
                
                <div id="emptyState" class="hidden-el text-center py-10 text-gray-400">
                    <i class="far fa-folder-open text-4xl mb-2"></i>
                    <p class="text-sm">Belum ada catatan.</p>
                </div>
            </div>
        </div>

    </div>

    <!-- JAVASCRIPT -->
    <script>
        const STORAGE_KEY = 'secret_diary_data_sonya_v2';
        const currentUser = 'Sonya';

        // --- DATA BAWAAN (HARDCODED DI KODINGAN) ---
        // Catatan ini akan langsung muncul saat login, dan tidak hilang meskipun cache dihapus.
        const DEFAULT_ENTRIES = [
            {
                id: 10001,
                date: "Senin, 30 Januari 2026 pukul 20.30",
                title: "Cerita Yang Terpendam",
                content: "Inilah aku, seorang gadis yang keberadaanku tidak diinginkan oleh ibu tiriku. Dia adalah sosok yang menggantikan keberadaan Ibuku yang sudah meninggal sejak hari aku dilahirkan. Pada saat aku berumur 5 tahun ayah menikahi Bu Nela yang aku panggil dengan sosok Ibu walaupun dia adalah Ibu tiriku. Namun dibalik itu semua ada rasa sakit yang selama ini aku pendam dan takut untuk menceritakannya kepada siapapun. Berawal sejak aku berumur 5 tahun, sikap Ibu tiba-tiba berubah kepadaku. Awal- awal dia menikah dengan Ayah, sikapnya sangat baik padaku. Dia yang selalu menyayangiku, menyuapiku disaat aku sedang sakit, mengajariku hal-hal yang belum ku ketahui, kini semua itu berubah menjadi sosok yang tidak ku kenali. Dia selalu memarahiku mengenai ha-hal kecil, memukuli aku sampai lebam, bahkan sampai berdarah. Namun, itu semua tidak dilakukannya ketika aku berada didekat Ayah. Bi Inah menjadi saksi kehidupanku selama 5 tahun terakhir ini. Sampai suatu hari dia mulai meracuni makanan yang disajikan untukku secara diam-diam dan akhirnya pun aku selalu keluar-masuk rumah sakit, dan semua itu tidak diketahui oleh Ayahku. Selama ini aku hanya bisa bungkam mengenai sikap asli Ibuku belakangan ini, aku hanya bisa mencurahkannya di 'Buku Diary' milikku ini. Bi Inah satu-satunya yang peduli padaku ketika ayah sedang bekerja. Dia yang selalu memberiku makan secara diam-diam walaupun akhirnya dimarahi oleh Ibu. Hari pun terus berjalan dengan Ibu yang selalu memukuli aku tanpa henti hingga akhirnya aku merasa lelah dengan semua itu. Aku ingin merasakan ketenangan seperti sebelum semua ini terjadi, aku lelah menjadi beban Ayah yang selalu membiayaiku keluar-masuk rumah sakit walaupun keluargaku memiliki fasilitas yang terjangkau. Pada suatu malam, aku mencari keberadaan racun-racun yang disembunyikan oleh Ibuku. Jika menginginkanku mati secara perlahan maka akan ku buat semua itu terjadi lebih cepat tanpa merasakan rasa sakit lagi. Aku menemukan semua racun yang digunakannya untuk meracuniku setiap hari, aku tidak tahu mana yang paling mematikanuntuk aku minum, karena aku masih berumur 10 tahun jadi belum mengerti hal-hal seperti ini. Lalu, aku meminum semua racun yang ada disana, kemudian aku masuk ke dalam kamarku. Sebelum kesadaranku hilang, aku menitipkan Buku diary ku kepada Bi Inah, supaya menjadi saksi bagaimana kehidupanku selama 5 tahun terakhir ini."
            },
        ];

        // Fungsi Inisialisasi Data (Agar catatan bawaan selalu ada)
        function initializeData() {
            const existingData = localStorage.getItem(STORAGE_KEY);
            // Jika data di browser kosong/null, masukkan data bawaan dari kodingan
            if (!existingData) {
                localStorage.setItem(STORAGE_KEY, JSON.stringify(DEFAULT_ENTRIES));
            }
        }

        // Jalankan inisialisasi saat halaman dibuka
        initializeData();

        // --- FUNGSI LOGIN ---
        function handleMainLogin(e) {
            e.preventDefault();
            const userIn = document.getElementById('mainUser').value.trim();
            const passIn = document.getElementById('mainPass').value.trim();
            const errorMsg = document.getElementById('loginError');

            if (userIn === 'Sonya' && passIn === 'DesaBoling') {
                openDashboard();
                document.getElementById('mainPass').value = '';
                document.getElementById('mainUser').value = '';
                errorMsg.classList.add('hidden-el');
            } else {
                errorMsg.classList.remove('hidden-el');
            }
        }

        // --- FUNGSI LOGOUT ---
        function logout() {
            document.getElementById('app-screen').classList.add('hidden-el');
            document.getElementById('auth-screen').classList.remove('hidden-el');
        }

        // --- FUNGSI BUKA DASHBOARD ---
        function openDashboard() {
            document.getElementById('auth-screen').classList.add('hidden-el');
            document.getElementById('app-screen').classList.remove('hidden-el');
            document.getElementById('app-screen').classList.add('flex');
            loadEntries();
        }

        // --- FUNGSI SIMPAN CATATAN ---
        function saveEntry(e) {
            e.preventDefault();
            const title = document.getElementById('entryTitle').value;
            const content = document.getElementById('entryContent').value;

            if(!title || !content) return;

            const newEntry = {
                id: Date.now(),
                date: new Date().toLocaleString('id-ID', { dateStyle: 'full', timeStyle: 'short' }),
                title,
                content
            };

            // Ambil data yang ada, tambahkan data baru di paling atas
            const existingData = JSON.parse(localStorage.getItem(STORAGE_KEY)) || [];
            existingData.unshift(newEntry);
            localStorage.setItem(STORAGE_KEY, JSON.stringify(existingData));

            document.getElementById('entryTitle').value = '';
            document.getElementById('entryContent').value = '';
            loadEntries();
        }

        // --- FUNGSI HAPUS CATATAN ---
        function deleteEntry(id) {
            if(confirm("Hapus catatan ini?")) {
                const existingData = JSON.parse(localStorage.getItem(STORAGE_KEY)) || [];
                const newData = existingData.filter(entry => entry.id !== id);
                localStorage.setItem(STORAGE_KEY, JSON.stringify(newData));
                loadEntries();
            }
        }

        // --- FUNGSI TAMPILKAN LIST ---
        function loadEntries() {
            const listContainer = document.getElementById('diaryList');
            const emptyState = document.getElementById('emptyState');
            
            // Ambil data dari LocalStorage
            const entries = JSON.parse(localStorage.getItem(STORAGE_KEY)) || [];
            listContainer.innerHTML = '';

            if(entries.length === 0) {
                emptyState.classList.remove('hidden-el');
            } else {
                emptyState.classList.add('hidden-el');
                entries.forEach(entry => {
                    const card = document.createElement('div');
                    card.className = "bg-white p-4 rounded-lg shadow-sm border border-gray-200 relative group hover:shadow-md transition";
                    card.innerHTML = `
                        <div class="flex justify-between items-start mb-2 border-b pb-2 border-gray-100">
                            <span class="text-xs text-blue-600 font-bold uppercase tracking-wide">${entry.date}</span>
                            <button onclick="deleteEntry(${entry.id})" class="text-gray-300 hover:text-red-500 transition focus:outline-none" title="Hapus">
                                <i class="fas fa-trash-alt"></i>
                            </button>
                        </div>
                        <h4 class="font-bold text-gray-800 text-base mb-1">${entry.title}</h4>
                        <p class="text-gray-600 text-sm whitespace-pre-wrap">${entry.content}</p>
                    `;
                    listContainer.appendChild(card);
                });
            }
        }
    </script>
</body>
</html>